{
  "version": 3,
  "sources": ["../src/nerd.ts", "../src/imsg.ts", "../src/part/nerd-auth.ts", "../src/part/nerd-header.ts", "../src/part/nerd-footer.ts", "../src/part/nerd-workbench.ts", "../src/part/nerd-gui.ts"],
  "sourcesContent": ["// Nerd - Common imports for component development\n\nimport type { NerdGui } from \"./part/nerd-gui\"\n\nclass NerdComponent extends HTMLElement {\n  static style = \"\"\n\n  static register(name: string) {\n    const styleElement = document.createElement(\"style\")\n    styleElement.textContent = this.style\n    document.head.appendChild(styleElement)\n    customElements.define(name, this)\n  }\n}\n\nclass NerdAction extends NerdComponent {\n  static style = `\n\t\tnerd-action {\n\t\t\tdisplay: inline;\n\t\t\tbackground: none;\n\t\t\tborder: none;\n\t\t\tcolor: #0066cc;\n\t\t\ttext-decoration: underline;\n\t\t\tcursor: pointer;\n\t\t\tpadding: 0;\n\t\t\tfont: inherit;\n\t\t}\n\n\t\tnerd-action:hover {\n\t\t\tcolor: #0052a3;\n\t\t}\n\t`\n}\n\nNerdAction.register(\"nerd-action\")\n\nexport default {\n  NerdComponent,\n  NerdAction,\n  gui: undefined as unknown as NerdGui,\n}\n", "// Interface Message Types - Must match internal/imsg/imsg.go\n\nenum Type {\n  GetTree = 0,\n  CreateChild,\n  RenameChild,\n  Shutdown,\n  AuthenticateUser,\n  CreateUser,\n}\n\nasync function ask(type: Type, pl: any): Promise<any> {\n  const response = await fetch(\"/auth\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ type, payload: pl }),\n  })\n\n  if (!response.ok) {\n    throw new Error((await response.text()) || \"Request failed\")\n  }\n\n  return await response.json()\n}\n\nexport default {\n  Type,\n  ask,\n}\n", "import nerd from \"../nerd\"\nimport imsg from \"../imsg\"\n\nexport class NerdAuth extends nerd.NerdComponent {\n  static style = `\n\t\tnerd-auth {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t}\n\n\t\tnerd-auth .auth-box {\n\t\t\twidth: 20em;\n\t\t\tpadding: 1.5em;\n\t\t\tborder: 1px solid #ddd;\n\t\t\tborder-radius: 0.5em;\n\t\t\tbackground: white;\n\t\t}\n\n\t\tnerd-auth form {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tgap: 0.666em;\n\t\t}\n\n\t\tnerd-auth .error {\n\t\t\tmargin-top: 1em;\n\t\t}\n\t`\n\n  static html = `\n\t\t<div class=\"auth-box\">\n\t\t\t<form class=\"login\">\n\t\t\t\t<h2>Login</h2>\n\t\t\t\t<input type=\"text\" name=\"username\" placeholder=\"Username\" required />\n\t\t\t\t<input type=\"password\" name=\"password\" placeholder=\"Password\" required />\n\t\t\t\t<button type=\"submit\">Login</button>\n\t\t\t\t<nerd-action class=\"toggle\">Need an account? Register</nerd-action>\n\t\t\t</form>\n\t\t\t<form class=\"register hidden\">\n\t\t\t\t<h2>Create Account</h2>\n\t\t\t\t<input type=\"text\" name=\"username\" placeholder=\"Username\" required />\n\t\t\t\t<input type=\"password\" name=\"password\" placeholder=\"Password\" required />\n\t\t\t\t<button type=\"submit\">Register</button>\n\t\t\t\t<nerd-action class=\"toggle\">Have an account? Login</nerd-action>\n\t\t\t</form>\n\t\t\t<div class=\"error\"></div>\n\t\t</div>\n\t`\n\n  private regmode = false\n  private login = undefined as unknown as HTMLFormElement\n  private register = undefined as unknown as HTMLFormElement\n  private error = undefined as unknown as HTMLDivElement\n\n  connectedCallback() {\n    this.innerHTML = NerdAuth.html\n    this.login = this.querySelector(\".login\")!\n    this.register = this.querySelector(\".register\")!\n    this.error = this.querySelector(\".error\")!\n    this.attachEventListeners()\n  }\n\n  private attachEventListeners() {\n    this.login.addEventListener(\"submit\", (e) => this.handleSubmit(e, false))\n    this.register.addEventListener(\"submit\", (e) => this.handleSubmit(e, true))\n    this.login\n      .querySelector(\".toggle\")!\n      .addEventListener(\"click\", () => this.toggleMode())\n    this.register\n      .querySelector(\".toggle\")!\n      .addEventListener(\"click\", () => this.toggleMode())\n  }\n\n  private toggleMode() {\n    this.regmode = !this.regmode\n    this.login.classList.toggle(\"hidden\")\n    this.register.classList.toggle(\"hidden\")\n  }\n\n  private async handleSubmit(e: Event, regmode: boolean) {\n    e.preventDefault()\n    const formData = new FormData(e.target as HTMLFormElement)\n    const pl = Object.fromEntries(formData)\n\n    try {\n      const a = await imsg.ask(\n        regmode ? imsg.Type.CreateUser : imsg.Type.AuthenticateUser,\n        pl,\n      )\n      nerd.gui.userId = a.userid\n      nerd.gui.updateAuthState()\n    } catch (err) {\n      this.showError(\n        err instanceof Error ? err.message : \"Network error. Please try again.\",\n      )\n    }\n  }\n\n  private showError(error: string) {\n    this.error.textContent = error\n  }\n}\n\nNerdAuth.register(\"nerd-auth\")\n", "import nerd from \"../nerd\"\n\nexport class NerdHeader extends nerd.NerdComponent {\n  static style = `\n\t\tnerd-header {\n\t\t\tdisplay: block;\n\t\t\tbackground: #2c3e50;\n\t\t\tcolor: white;\n\t\t\tpadding: 1rem;\n\t\t\tfont-size: 1.2rem;\n\t\t\tfont-weight: bold;\n\t\t}\n\t`\n\n  static html = `\n\t\tNerd - Personal Software Agent Framework\n\t`\n\n  connectedCallback() {\n    this.innerHTML = NerdHeader.html\n  }\n}\n\nNerdHeader.register(\"nerd-header\")\n", "import nerd from \"../nerd\"\n\nexport class NerdFooter extends nerd.NerdComponent {\n  static style = `\n\t\tnerd-footer {\n\t\t\tdisplay: block;\n\t\t\tbackground: #2c3e50;\n\t\t\tcolor: white;\n\t\t\tpadding: 1rem;\n\t\t\ttext-align: center;\n\t\t}\n\t`\n\n  static html = `\n\t\tFooter\n\t`\n\n  connectedCallback() {\n    this.innerHTML = NerdFooter.html\n  }\n}\n\nNerdFooter.register(\"nerd-footer\")\n", "import nerd from \"../nerd\"\nimport \"./nerd-header\"\nimport \"./nerd-footer\"\n\nexport class NerdWorkbench extends nerd.NerdComponent {\n  static style = `\n\t\tnerd-workbench {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: 1fr 1fr;\n\t\t\tgrid-template-rows: auto 1fr auto;\n\t\t\tgrid-template-areas:\n\t\t\t\t\"header header\"\n\t\t\t\t\"left right\"\n\t\t\t\t\"footer footer\";\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\n\t\tnerd-workbench nerd-header {\n\t\t\tgrid-area: header;\n\t\t}\n\n\t\tnerd-workbench .board.left {\n\t\t\tgrid-area: left;\n\t\t\tborder: 1px solid #ddd;\n\t\t}\n\n\t\tnerd-workbench .board.right {\n\t\t\tgrid-area: right;\n\t\t\tborder: 1px solid #ddd;\n\t\t}\n\n\t\tnerd-workbench nerd-footer {\n\t\t\tgrid-area: footer;\n\t\t}\n\t`\n\n  static html = `\n\t\t<nerd-header></nerd-header>\n\t\t<div class=\"board left\"></div>\n\t\t<div class=\"board right\"></div>\n\t\t<nerd-footer></nerd-footer>\n\t`\n\n  connectedCallback() {\n    this.innerHTML = NerdWorkbench.html\n  }\n}\n\nNerdWorkbench.register(\"nerd-workbench\")\n", "import nerd from \"../nerd\"\nimport \"./nerd-auth\"\nimport \"./nerd-workbench\"\n\nexport class NerdGui extends nerd.NerdComponent {\n  static style = `\n\t\t@font-face {\n\t\t\tfont-family: 'Inter';\n\t\t\tsrc: url('/fonts/InterVariable.woff2');\n\t\t\tfont-weight: 100 900;\n\t\t\tfont-display: block;\n\t\t}\n\n\t\tbody {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\th2 {\n\t\t\tmargin: 0 0 0.25em 0;\n\t\t\tfont-size: 1.5em;\n\t\t}\n\n\t\t.error {\n\t\t\tcolor: red;\n\t\t}\n\n\t\tnerd-gui {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t\tfont-family: 'Inter';\n\t\t\tbackground: #fafafa;\n\t\t}\n\n\t\t.hidden {\n\t\t\tdisplay: none;\n\t\t}\n\t`\n\n  static html = `\n\t\t<nerd-workbench></nerd-workbench>\n\t`\n\n  userId: number = 0\n  private auth = document.createElement(\"nerd-auth\")\n\n  connectedCallback() {\n    this.userId = parseInt(this.getAttribute(\"userid\")!, 10)\n    nerd.gui = this\n    this.innerHTML = NerdGui.html\n    this.updateAuthState()\n  }\n\n  updateAuthState() {\n    const workbench = this.querySelector(\"nerd-workbench\")!\n\n    if (this.userId === 0) {\n      workbench.classList.add(\"hidden\")\n      this.appendChild(this.auth)\n    } else {\n      workbench.classList.remove(\"hidden\")\n      this.auth.remove()\n    }\n  }\n}\n\nNerdGui.register(\"nerd-gui\")\n"],
  "mappings": "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",
  "names": ["NerdComponent", "name", "styleElement", "NerdAction", "nerd_default", "Type", "ask", "type", "pl", "response", "imsg_default", "NerdAuth", "_NerdAuth", "nerd_default", "regmode", "formData", "pl", "a", "imsg_default", "err", "error", "NerdHeader", "_NerdHeader", "nerd_default", "NerdFooter", "_NerdFooter", "nerd_default", "NerdWorkbench", "_NerdWorkbench", "nerd_default", "NerdGui", "_NerdGui", "nerd_default", "workbench"]
}
